<div class="relative w-full h-[300px] md:h-full">
  <div
    [style]="{
      backgroundImage:
        'url(https://image.tmdb.org/t/p/original' + movie.backdrop_path + ')',
      backgroundPosition: 'center',
      backgroundSize: 'cover',
      backgroundRepeat: 'no-repeat'
    }"
    class="w-full h-[300px] md:h-full"
  ></div>
  <div class="backdrop-gradient"></div>
  <div
    class="movie-info absolute top-[50%] md:top-[30%] left-[5%] md:max-w-[550px] break-words"
  >
    <div
      id="playBtn"
      class="opacity-0 size-28 rounded-full border-2 border-dashed border-w absolute text-9xl flex items-center justify-center cursor-pointer overflow-hidden after:content-[''] after:absolute after:w-full after:h-full after:bg-gray-200 after:opacity-20 group hover:border-solid transition"
      (click)="togglePlayer(true)"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="40"
        height="40"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon icon-tabler icons-tabler-outline icon-tabler-player-play text-white group-hover:scale-125 transition"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M7 4v16l13 -8z" />
      </svg>
    </div>
    <div class="movie-info__content">
      <div
        id="backdropHeader"
        class="text-white text-[20px] md:text-[60px] font-bold leading-tight"
      >
        {{ movie.title }}
      </div>
      <div
        id="backdropInfo"
        class="text-white flex gap-3 text-sm md:text-lg mt-4"
      >
        <span>{{ movie.release_date | date }}</span>
        |
        <span class="flex gap-1">
          {{ movie.vote_count }}
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon icon-tabler icons-tabler-outline icon-tabler-thumb-up"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path
              d="M7 11v8a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-7a1 1 0 0 1 1 -1h3a4 4 0 0 0 4 -4v-1a2 2 0 0 1 4 0v5h3a2 2 0 0 1 2 2l-1 5a2 3 0 0 1 -2 2h-7a3 3 0 0 1 -3 -3"
            />
          </svg>
        </span>
        |
        <span>{{ movie.original_language | uppercase }}</span>
      </div>
      <div
        class="mt-4 hidden md:block text-white text-sm opacity-70"
        id="backdropOverview"
      >
        {{ movie.overview }}
      </div>
    </div>
  </div>
  <div
    class="absolute left-[5%] top-0 text-white py-8 flex justify-between w-[90%]"
  >
    <div class="logo cursor-pointer select-none">
      <div class="font-bold text-[18px] md:text-[25px] leading-7">
        Code_Leap
      </div>
      <div class="text-right text-sm md:mt-1">.movie</div>
    </div>
    <div class="hidden md:flex gap-5">
      <div class="text-lg cursor-pointer hover:opacity-70 transition">
        About
      </div>
      <div
        class="text-lg cursor-pointer hover:opacity-70 transition"
        (click)="handleSection('popular')"
      >
        Popular
      </div>
      <div
        class="text-lg cursor-pointer hover:opacity-70 transition"
        (click)="handleSection('topRated')"
      >
        Top rated
      </div>
      <div
        class="text-lg cursor-pointer hover:opacity-70 transition"
        (click)="handleSection('upComing')"
      >
        Up coming
      </div>
      |
      <div
        class="text-lg cursor-pointer hover:opacity-70 transition"
        (click)="handleLogin()"
      >
        Login
      </div>
    </div>
    @if ( !showMbMenu ) {
    <div class="block md:hidden" (click)="showMbMenu = true">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon icon-tabler icons-tabler-outline icon-tabler-menu-deep cursor-pointer"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M4 6h16" />
        <path d="M7 12h13" />
        <path d="M10 18h10" />
      </svg>
    </div>
    }
  </div>

  @if (showMbMenu) {
  <div
    [ngClass]="[
      'absolute right-0 top-0 w-[30%] h-screen bg-black shadow-md z-50 px-4 py-10 transition duration-500 opacity-6 md:hidden'
    ]"
  >
    <div class="flex flex-col gap-4">
      <div class="text-sm cursor-pointer hover:opacity-70 transition">
        About
      </div>
      <div
        class="text-sm cursor-pointer hover:opacity-70 transition"
        (click)="handleSection('popular')"
      >
        Popular
      </div>
      <div
        class="text-sm cursor-pointer hover:opacity-70 transition"
        (click)="handleSection('topRated')"
      >
        Top rated
      </div>
      <div
        class="text-sm cursor-pointer hover:opacity-70 transition"
        (click)="handleSection('upComing')"
      >
        Up coming
      </div>

      <div
        class="text-sm cursor-pointer hover:opacity-70 transition"
        (click)="handleLogin()"
      >
        Login
      </div>
    </div>
    <div
      (click)="showMbMenu = false"
      class="w-6 h-6 rounded-full border-2 border-white text-center absolute right-5 top-2 flex items-center justify-center cursor-pointer"
    >
      <span class="text-white text-sm select-none">x</span>
    </div>
  </div>
  }

  <div
    class="absolute bottom-4 left-[50%] translate-x-[-50%] w-6 h-12 border rounded-lg hidden md:block"
    id="scrollIndicator"
  >
    <div
      class="size-2 rounded-full bg-white absolute left-[50%] translate-x-[-50%] top-2 dot"
    ></div>
  </div>

  <app-video-player
    *ngIf="openPlayer"
    [showDialog]="openPlayer"
    (click)="togglePlayer(false)"
  />
</div>
